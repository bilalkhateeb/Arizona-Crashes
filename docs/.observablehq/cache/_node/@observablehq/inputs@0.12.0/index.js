import{html as m}from"../../htl@0.3.1/index.js";import{format as Re,parse as Be}from"../../isoformat@0.2.1/index.js";function C(e){return e==null?null:typeof e=="number"?`${e}px`:`${e}`}function F(e){return{"--input-width":C(e)}}const oe={bubbles:!0};function V(e){e.preventDefault()}function ne({currentTarget:e}){(e.form||e).dispatchEvent(new Event("input",oe))}function ye(e){return e.checkValidity()}function D(e){return e}let Ue=0;function re(){return`inputs-3a86ea-${++Ue}`}function j(e,t){if(e)return e=m`<label>${e}`,t!==void 0&&(e.htmlFor=t.id=re()),e}function Ve(e="\u2261",{label:t="",value:n,reduce:i,disabled:r,required:u=!1,width:o}={}){const f=typeof e=="string"||e instanceof Node;f?(!u&&n===void 0&&(n=0),i===void 0&&(i=(p=0)=>p+1),r=new Set(r?[e]:[]),e=[[e,i]]):(!u&&n===void 0&&(n=null),r=new Set(r===!0?Array.from(e,([p])=>p):r||void 0));const d=m`<form class=inputs-3a86ea>`;d.addEventListener("submit",V);const l={width:C(o)},h=Array.from(e,([p,g=D])=>{if(typeof g!="function")throw new TypeError("reduce is not a function");return m`<button disabled=${r.has(p)} style=${l} onclick=${v=>{d.value=g(d.value),ne(v)}}>${p}`});return(t=j(t,f?h[0]:void 0))&&d.append(t),d.append(...h),d.value=n,d}function H(e){return Array.isArray(e)?e:Array.from(e)}function ge(e){return e?typeof e[Symbol.iterator]=="function":!1}function we(e){if(ge(e.columns))return e.columns;if(e.schema&&ge(e.schema.fields))return Array.from(e.schema.fields,t=>t.name);if(typeof e.columnNames=="function")return e.columnNames()}function R(e){return e==null?"":`${e}`}const ie=ue(e=>{const t=W(e);return n=>n==null?"":typeof n=="number"?t(n):n instanceof Date?se(n):`${n}`}),W=ue(e=>t=>t===0?"0":t.toLocaleString(e)),We=ie(),Ge=W();function ke(e){const t=e.toString(),n=t.length;let i=-1,r;e:for(let u=1;u<n;++u)switch(t[u]){case".":i=r=u;break;case"0":i===0&&(i=u),r=u;break;default:if(!+t[u])break e;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(r+1):t}function se(e){return Re(e,"Invalid Date")}function ue(e){let t=ue,n;return(i="en")=>i===t?n:n=e(t=i)}function ce(e,t){return G(t)-G(e)||(e<t?-1:e>t?1:e>=t?0:NaN)}function xe(e,t){return G(t)-G(e)||(t<e?-1:t>e?1:t>=e?0:NaN)}function G(e){return e!=null&&!Number.isNaN(e)}const Je=([e])=>e,Ne=([,e])=>e;function Ae({multiple:e,render:t,selectedIndexes:n,select:i}){return function(r,{locale:u,keyof:o=r instanceof Map?Je:D,valueof:f=r instanceof Map?Ne:D,format:d=(N=>(w,$,S)=>N(o(w,$,S)))(ie(u)),multiple:l,key:h,value:p,disabled:g=!1,sort:v,unique:b,...O}={}){if(typeof o!="function")throw new TypeError("keyof is not a function");if(typeof f!="function")throw new TypeError("valueof is not a function");if(typeof d!="function")throw new TypeError("format is not a function");e!==void 0&&(l=e),v=Ye(v);let N=+l;p===void 0&&(p=h!==void 0&&r instanceof Map?N>0?Array.from(h,A=>r.get(A)):r.get(h):void 0),b=!!b,r=H(r);let w=r.map((A,x)=>[o(A,x,r),x]);v!==void 0&&w.sort(([A],[x])=>v(A,x)),b&&(w=[...new Map(w.map(A=>[et(A[0]),A])).values()]);const $=w.map(Ne);l===!0?N=Math.max(1,Math.min(10,$.length)):N>0?l=!0:(l=!1,N=void 0);const[S,c]=t(r,$,Qe(r,$,p,l,f),Xe(r,$,g,f),{...O,format:d,multiple:l,size:N});S.addEventListener("input",k),S.addEventListener("change",ne),S.addEventListener("submit",V);function k(A){if(A&&A.isTrusted&&S.removeEventListener("change",ne),l)p=n(c).map(x=>f(r[x],x,r));else{const x=Ze(c);p=x<0?null:f(r[x],x,r)}}return k(),Object.defineProperty(S,"value",{get(){return p},set(A){if(l){const x=new Set(A);for(const q of c){const z=+q.value;i(q,x.has(f(r[z],z,r)))}}else c.value=$.find(x=>A===f(r[x],x,r));k()}})}}function Qe(e,t,n,i,r){const u=new Set(n===void 0?[]:i?H(n):[n]);if(!u.size)return()=>!1;const o=new Set;for(const f of t)u.has(r(e[f],f,e))&&o.add(f);return f=>o.has(f)}function Xe(e,t,n,i){if(typeof n=="boolean")return n;const r=new Set(H(n)),u=new Set;for(const o of t)r.has(i(e[o],o,e))&&u.add(o);return o=>u.has(o)}function Ye(e){if(!(e===void 0||e===!1)){if(e===!0||e==="ascending")return ce;if(e==="descending")return xe;if(typeof e=="function")return e;throw new TypeError("sort is not a function")}}function Ze(e){return e.value?+e.value:-1}function et(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Ee(e,t){return Ae({multiple:e,render(n,i,r,u,{format:o,label:f}){const d=m`<form class="inputs-3a86ea inputs-3a86ea-checkbox">
      ${j(f)}<div>
        ${i.map(l=>m`<label><input type=${t} disabled=${typeof u=="function"?u(l):u} name=input value=${l} checked=${r(l)}>${o(n[l],l,n)}`)}
      </div>
    </form>`;return[d,it(d.elements.input,e)]},selectedIndexes(n){return Array.from(n).filter(i=>i.checked).map(i=>+i.value)},select(n,i){n.checked=i}})}const tt=Ee(!1,"radio"),nt=Ee(!0,"checkbox");function rt({label:e,value:t,values:n,disabled:i}={}){const r=m`<input class=inputs-3a86ea-input type=checkbox name=input disabled=${i}>`,u=m`<form class="inputs-3a86ea inputs-3a86ea-toggle">${j(e,r)}${r}`;return Object.defineProperty(u,"value",{get(){return n===void 0?r.checked:n[r.checked?0:1]},set(o){r.checked=n===void 0?!!o:o===n[0]}}),t!==void 0&&(u.value=t),u}function it(e,t){return e===void 0?new ut(t?[]:null):typeof e.length>"u"?new(t?lt:at)(e):e}class ut{constructor(t){this._value=t}get value(){return this._value}set value(t){}*[Symbol.iterator](){}}class at{constructor(t){this._input=t}get value(){const{_input:t}=this;return t.checked?t.value:""}set value(t){const{_input:n}=this;n.checked||(n.checked=R(t)===n.value)}*[Symbol.iterator](){yield this._input}}class lt{constructor(t){this._input=t,this._value=t.checked?[t.value]:[]}get value(){return this._value}set value(t){const{_input:n}=this;n.checked||(n.checked=R(t)===n.value,this._value=n.checked?[n.value]:[])}*[Symbol.iterator](){yield this._input}}function fe(e){if(e===void 0)return[null,null];const t=re();return[m`<datalist id=${t}>${Array.from(e,n=>m`<option value=${R(n)}>`)}`,t]}function J(e,t,n,{validate:i=ye,submit:r}={},{get:u=l=>l.value,set:o=(l,h)=>l.value=R(h),same:f=(l,h)=>l.value===h,after:d=l=>t.after(l)}={}){r=r===!0?"Submit":r||null;const l=r?m`<button type=submit disabled>${r}`:null;r&&d(l),o(t,n),n=i(t)?u(t):void 0,e.addEventListener("submit",p),t.oninput=g;function h(){if(i(t))return n=u(t),!0}function p(v){V(v),r&&(h()?(l.disabled=!0,ne(v)):t.reportValidity())}function g(v){r?(l.disabled=f(t,n),v.stopPropagation()):h()||v.stopPropagation()}return Object.defineProperty(e,"value",{get(){return n},set(v){o(t,v),h()}})}function Q({label:e,value:t="",type:n="text",placeholder:i,pattern:r,spellcheck:u,autocomplete:o,autocapitalize:f,min:d,max:l,minlength:h,maxlength:p,required:g=h>0,datalist:v,readonly:b,disabled:O,width:N,...w}={}){const[$,S]=fe(v),c=m`<input
    type=${n}
    name=text
    list=${S}
    readonly=${b}
    disabled=${O}
    required=${g}
    min=${d}
    max=${l}
    minlength=${h}
    maxlength=${p}
    pattern=${r}
    spellcheck=${de(u)}
    autocomplete=${B(o)}
    autocapitalize=${B(f)}
    placeholder=${i}
  >`,k=m`<form class=inputs-3a86ea style=${F(N)}>
    ${j(e,c)}<div class=inputs-3a86ea-input>
      ${c}
    </div>${$}
  </form>`;return J(k,c,t,w)}function ot(e){return Q({...e,type:"email"})}function st(e){return Q({...e,type:"tel"})}function ct(e){return Q({...e,type:"url"})}function ft(e){return Q({...e,type:"password"})}function de(e){return e==null?null:`${e}`}function B(e){return e==null?null:`${e===!1?"off":e===!0?"on":e}`}function dt({label:e,value:t,required:n,datalist:i,readonly:r,disabled:u,width:o,...f}={}){const[d,l]=fe(i),h=re(),p=m`<input
    type=color
    name=text
    value=${t}
    id=${h}
    list=${l}
    readonly=${r}
    disabled=${u}
    required=${n}
  >`,g=m`<output
    for=${h}
  >`;g.value=p.value,p.addEventListener("input",()=>g.value=p.value);const v=m`<form class=inputs-3a86ea style=${F(o)}>
    ${j(e,p)}<div class=inputs-3a86ea-input>
      <div class=inputs-3a86ea-input>${p}${g}</div>
    </div>${d}
  </form>`;return J(v,p,t,f,{after:b=>p.parentNode.after(b)})}const pt={type:"date",get:e=>e.valueAsDate,set:(e,t)=>e.value=Oe(t),same:(e,t)=>+e.valueAsDate==+t,format:Oe},mt={type:"datetime-local",get:e=>e.value?new Date(e.value):null,set:(e,t)=>e.value=Te(t),same:(e,t)=>+new Date(e.value)==+t,format:Te};function Se({label:e,min:t,max:n,required:i,readonly:r,disabled:u,width:o,value:f,...d}={},{type:l,format:h,...p}){const g=m`<input type=${l} name=date readonly=${r} disabled=${u} required=${i} min=${h(t)} max=${h(n)}>`,v=m`<form class=inputs-3a86ea style=${F(o)}>
    ${j(e,g)}<div class=inputs-3a86ea-input>
      ${g}
    </div>
  </form>`;return J(v,g,pe(f),d,p)}function ht(e){return Se(e,pt)}function vt(e){return Se(e,mt)}function pe(e){return e instanceof Date&&!isNaN(e)?e:typeof e=="string"?Be(e,null):e==null||isNaN(e=+e)?null:new Date(+e)}function Oe(e){return(e=pe(e))?e.toISOString().slice(0,10):e}function Te(e){return(e=pe(e))?new Date(+e-e.getTimezoneOffset()*1e3*60).toISOString().slice(0,16):e}function $t(e,t){return(Array.isArray(e)?yt:wt)(e,t)}function bt(e){return m`<div>${e}`}function yt(e,{template:t=bt}={}){e=[...e];let n=e.map(({value:i})=>i);return Object.defineProperty(t(e),"value",{get(){for(let i=0,r=e.length;i<r;++i){const u=e[i].value;Object.is(u,n[i])||(n=[...n],n[i]=u)}return n},set(i=[]){for(let r=0,u=e.length;r<u;++r)e[r].value=i[r]}})}function gt(e){return m`<div>${Object.values(e)}`}function wt(e,{template:t=gt}={}){e={...e};let n=Object.fromEntries(Object.entries(e).map(([i,{value:r}])=>[i,r]));return Object.defineProperty(t(e),"value",{get(){for(const i in n){const r=e[i].value;Object.is(r,n[i])||(n={...n},n[i]=r)}return n},set(i={}){for(const r in e)e[r].value=i[r]}})}function kt({label:e,required:t,accept:n,capture:i,multiple:r,disabled:u,width:o,value:f,submit:d,transform:l=p=>p,...h}={}){const p=m`<input
    type=file
    name=file
    disabled=${u}
    required=${t}
    accept=${n}
    capture=${i}
    multiple=${r}
  >`,g=m`<form class=inputs-3a86ea style=${F(o)}>
    ${j(e,p)}<div class=inputs-3a86ea-input>
      ${p}
    </div>
  </form>`;return J(g,p,void 0,h,{get:v=>r?Array.from(v.files,b=>l(b)):v.files.length?l(v.files[0]):null,set:()=>{},same:()=>!1})}const ae=1e-6;function xt(e,t){return arguments.length<2&&(t=e,e=void 0),e===void 0&&(e=[]),ze({extent:e},t)}function Nt(e=[0,1],t){return ze({extent:e,range:!0},t)}function ze({extent:[e,t],range:n},{format:i=ke,transform:r,invert:u,label:o="",value:f,step:d,disabled:l,placeholder:h,validate:p=ye,width:g}={}){let v;if(typeof i!="function")throw new TypeError("format is not a function");(e==null||isNaN(e=+e))&&(e=-1/0),(t==null||isNaN(t=+t))&&(t=1/0),e>t&&([e,t]=[t,e],r===void 0&&(r=me)),d!==void 0&&(d=+d);const b=m`<input type=number min=${isFinite(e)?e:null} max=${isFinite(t)?t:null} step=${d??"any"} name=number required placeholder=${h} oninput=${S} disabled=${l}>`;let O;if(n){if(r===void 0&&(r=D),typeof r!="function")throw new TypeError("transform is not a function");if(u===void 0&&(u=r.invert===void 0?Et(r):r.invert),typeof u!="function")throw new TypeError("invert is not a function");let c=+r(e),k=+r(t);c>k&&([c,k]=[k,c]),n=m`<input type=range min=${isFinite(c)?c:null} max=${isFinite(k)?k:null} step=${d===void 0||r!==D&&r!==me?"any":d} name=range oninput=${$} disabled=${l}>`,O=r===D?n:m`<input type=range min=${e} max=${t} step=${d===void 0?"any":d} name=range disabled=${l}>`}else n=null,r=u=D;const N=m`<form class=inputs-3a86ea style=${F(g)}>
    ${j(o,b)}<div class=inputs-3a86ea-input>
      ${b}${n}
    </div>
  </form>`;N.addEventListener("submit",V);function w(c){return O?(c=Math.max(e,Math.min(t,c)),isFinite(c)?(O.valueAsNumber=c,O.valueAsNumber):c):+c}function $(c){const k=w(u(n.valueAsNumber));if(isFinite(k)&&(b.valueAsNumber=Math.max(e,Math.min(t,k)),p(b))){v=b.valueAsNumber,b.value=i(v);return}c&&c.stopPropagation()}function S(c){const k=w(b.valueAsNumber);if(isFinite(k)&&(n&&(n.valueAsNumber=r(k)),p(b))){v=k;return}c&&c.stopPropagation()}return Object.defineProperty(N,"value",{get(){return v},set(c){c=w(c),isFinite(c)&&(b.valueAsNumber=c,n&&(n.valueAsNumber=r(c)),p(b)&&(v=c,b.value=i(v)))}}),f===void 0&&O&&(f=O.valueAsNumber),f!==void 0&&(N.value=f),N}function me(e){return-e}function At(e){return e*e}function Et(e){return e===D||e===me?e:e===Math.sqrt?At:e===Math.log?Math.exp:e===Math.exp?Math.log:t=>St(e,t,t)}function St(e,t,n){let i=100,r,u,o;n=n===void 0?0:+n,t=+t;do u=e(n),o=e(n+ae),u===o&&(o=u+ae),n-=r=-1*ae*(u-t)/(u-o);while(i-- >0&&Math.abs(r)>ae);return i<0?NaN:n}function Ot(e,{locale:t,format:n=Lt(t),label:i,query:r="",placeholder:u="Search",columns:o=we(e),spellcheck:f,autocomplete:d,autocapitalize:l,filter:h=o===void 0?je:Tt(o),datalist:p,disabled:g,required:v=!0,width:b}={}){let O=[];e=H(e),v=!!v;const[N,w]=fe(p),$=m`<input
    name=input
    type=search
    list=${w}
    disabled=${g}
    spellcheck=${de(f)}
    autocomplete=${B(d)}
    autocapitalize=${B(l)}
    placeholder=${u}
    value=${r}
    oninput=${k}
  >`,S=m`<output name=output>`,c=m`<form class=inputs-3a86ea style=${F(b)}>
    ${j(i,$)}<div class=inputs-3a86ea-input>
      ${$}${S}
    </div>${N}
  </form>`;c.addEventListener("submit",V);function k(){O=$.value||v?e.filter(h($.value)):[],o!==void 0&&(O.columns=o),S.value=n(O.length)}return k(),Object.defineProperties(c,{value:{get(){return O}},query:{get(){return r},set(A){r=$.value=R(A),k()}}})}function je(e){const t=`${e}`.split(/\s+/g).filter(n=>n).map(Le);return n=>{if(n==null)return!1;if(typeof n=="object")e:for(const i of t){for(const r of zt(n))if(i.test(r))continue e;return!1}else for(const i of t)if(!i.test(n))return!1;return!0}}function Tt(e){return t=>{const n=`${t}`.split(/\s+/g).filter(i=>i).map(Le);return i=>{e:for(const r of n){for(const u of e)if(r.test(i[u]))continue e;return!1}return!0}}}function*zt(e){for(const t in e)yield e[t]}function Le(e){return new RegExp(`(?:^|[^\\p{L}-])${jt(e)}`,"iu")}function jt(e){return e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&")}const Lt=ue(e=>{const t=W(e);return n=>`${t(n)} result${n===1?"":"s"}`}),qt=Ae({render(e,t,n,i,{format:r,multiple:u,size:o,label:f,width:d}){const l=m`<select class=inputs-3a86ea-input disabled=${i===!0} multiple=${u} size=${o} name=input>
      ${t.map(h=>m`<option value=${h} disabled=${typeof i=="function"?i(h):!1} selected=${n(h)}>${R(r(e[h],h,e))}`)}
    </select>`;return[m`<form class=inputs-3a86ea style=${F(d)}>${j(f,l)}${l}`,l]},selectedIndexes(e){return Array.from(e.selectedOptions,t=>+t.value)},select(e,t){e.selected=t}}),qe=22;function Mt(e,t={}){const{rows:n=11.5,height:i,maxHeight:r=i===void 0?(n+1)*qe-1:void 0,width:u={},maxWidth:o}=t,f=re(),d=m`<form class="inputs-3a86ea inputs-3a86ea-table" id=${f} style=${{height:C(i),maxHeight:C(r),width:typeof u=="string"||typeof u=="number"?C(u):void 0,maxWidth:C(o)}}>`;return e&&typeof e.then=="function"?(Object.defineProperty(d,"value",{configurable:!0,set(){throw new Error("cannot set value while data is unresolved")}}),Promise.resolve(e).then(l=>Me({root:d,id:f},l,t))):Me({root:d,id:f},e,t),d}function Me({root:e,id:t},n,{columns:i=we(n),value:r,required:u=!0,sort:o,reverse:f=!1,format:d,locale:l,align:h,header:p,rows:g=11.5,width:v={},multiple:b=!0,select:O=!0,layout:N}={}){i=i===void 0?It(n):H(i),N===void 0&&(N=i.length>=12?"auto":"fixed"),d=Dt(d,n,i,l),h=Pt(h,n,i);let w=[],$=[],S=n[Symbol.iterator](),c=0,k=Ct(n),A=q(g*2);function x(){c>=0&&(c=S=void 0,$=Uint32Array.from(w=H(n),(a,s)=>s),k=$.length)}function q(a){if(a=Math.floor(a),k!==void 0)return Math.min(k,a);if(a<=c)return a;for(;a>c;){const{done:s,value:y}=S.next();if(s)return k=c;$.push(c++),w.push(y)}return c}let z=null,I=!1,E=new Set,P=null,_=null;const L=m`<tbody>`,Ce=m`<tr><td>${O?m`<input type=${b?"checkbox":"radio"} name=${b?null:"radio"}>`:null}</td>${i.map(()=>m`<td>`)}`,Y=m`<tr><th>${O?m`<input type=checkbox onclick=${Ke} disabled=${!b}>`:null}</th>${i.map(a=>m`<th title=${a} onclick=${s=>be(s,a)}><span></span>${p&&a in p?p[a]:a}</th>`)}</tr>`;e.appendChild(m.fragment`<table style=${{tableLayout:N}}>
  <thead>${q(1)||i.length?Y:null}</thead>
  ${L}
</table>
<style>${i.map((a,s)=>{const y=[];if(h[a]!=null&&y.push(`text-align:${h[a]}`),v[a]!=null&&y.push(`width:${C(v[a])}`),y.length)return`#${t} tr>:nth-child(${s+2}){${y.join(";")}}`}).filter(D).join(`
`)}</style>`);function le(a,s){if(c===a){for(;a<s;++a)ve(S.next().value,a);c=s}else for(let y;a<s;++a)y=$[a],ve(w[y],y)}function ve(a,s){const y=Ce.cloneNode(!0),T=X(y);if(T!=null&&(T.onclick=He,T.checked=E.has(s),T.value=s),a!=null)for(let K=0;K<i.length;++K){let te=i[K],M=a[te];G(M)&&(M=d[te](M,s,n),M instanceof Node||(M=document.createTextNode(M)),y.childNodes[K+1].appendChild(M))}L.append(y)}function U(a){x();let s=$.indexOf(a);if(s<L.childNodes.length){const y=L.childNodes[s];X(y).checked=!1}E.delete(a)}function Z(a){x();let s=$.indexOf(a);if(s<L.childNodes.length){const y=L.childNodes[s];X(y).checked=!0}E.add(a)}function*$e(a,s){if(x(),a=$.indexOf(a),s=$.indexOf(s),a<s)for(;a<=s;)yield $[a++];else for(;s<=a;)yield $[s++]}function Ie(a){return a[Symbol.iterator]().next().value}function Ke(a){if(x(),this.checked){E=new Set($);for(const s of L.childNodes)X(s).checked=!0}else{for(let s of E)U(s);P=_=null,a.detail&&a.currentTarget.blur()}ee()}function He(a){x();let s=+this.value;if(b)if(a.shiftKey){if(P===null)P=E.size?Ie(E):$[0];else for(let y of $e(P,_))U(y);_=s;for(let y of $e(P,_))Z(y)}else P=_=s,E.has(s)?(U(s),P=_=null,a.detail&&a.currentTarget.blur()):Z(s);else{for(let y of E)U(y);Z(s)}ee()}function be(a,s){x();const y=a.currentTarget;let T;if(z===y&&a.metaKey)he(z).textContent="",z=null,I=!1,T=ce;else{z===y?I=!I:(z&&(he(z).textContent=""),z=y,I=a.altKey);const K=I?xe:ce;T=(te,M)=>K(w[te][s],w[M][s]),he(y).textContent=I?"\u25BE":"\u25B4"}for($.sort(T),E=new Set(Array.from(E).sort(T)),e.scrollTo(e.scrollLeft,0);L.firstChild;)L.firstChild.remove();le(0,A=q(g*2)),P=_=null,ee()}function ee(){const a=X(Y);a!=null&&(a.disabled=!b&&!E.size,a.indeterminate=b&&E.size&&E.size!==k,a.checked=E.size,r=void 0)}if(e.addEventListener("scroll",()=>{e.scrollHeight-e.scrollTop<g*qe*1.5&&A<q(A+1)&&le(A,A=q(A+g))}),o===void 0&&f&&(x(),$.reverse()),r!==void 0){if(x(),b){const a=new Set(r);E=new Set($.filter(s=>a.has(w[s])))}else{const a=w.indexOf(r);E=a<0?new Set:new Set([a])}ee()}if(q(1)?le(0,A):L.append(m`<tr>${i.length?m`<td>`:null}<td rowspan=${i.length} style="padding-left: var(--length3); font-style: italic;">No results.</td></tr>`),o!==void 0){let a=i.indexOf(o);a>=0&&(f&&(z=Y.childNodes[a+1]),be({currentTarget:Y.childNodes[a+1]},i[a]))}return Object.defineProperty(e,"value",{get(){if(r===void 0)if(x(),b)r=Array.from(u&&E.size===0?$:E,a=>w[a]),r.columns=i;else if(E.size){const[a]=E;r=w[a]}else r=null;return r},set(a){if(x(),b){const s=new Set(a),y=new Set($.filter(T=>s.has(w[T])));for(const T of E)y.has(T)||U(T);for(const T of y)E.has(T)||Z(T)}else{const s=w.indexOf(a);E=s<0?new Set:new Set([s])}r=void 0}})}function X(e){return e.firstChild.firstChild}function he(e){return e.firstChild}function Dt(e={},t,n,i){const r=Object.create(null);for(const u of n){if(u in e){r[u]=e[u];continue}switch(De(t,u)){case"number":r[u]=W(i);break;case"date":r[u]=se;break;default:r[u]=ie(i);break}}return r}function Pt(e={},t,n){const i=Object.create(null);for(const r of n)r in e?i[r]=e[r]:De(t,r)==="number"&&(i[r]="right");return i}function De(e,t){if(Ft(e))return _t(e,t);for(const n of e){if(n==null)continue;const i=n[t];if(i!=null)return typeof i=="number"?"number":i instanceof Date?"date":void 0}}function Ft(e){return typeof e.getChild=="function"&&typeof e.toArray=="function"&&e.schema&&Array.isArray(e.schema.fields)}function _t(e,t){const n=e.schema.fields.find(i=>i.name===t);switch(n?.type.typeId){case 8:case 10:return n.type.unit===1?"date":"number";case 2:case 3:case 7:case 9:return"number"}}function Ct(e){if(typeof e.length=="number")return e.length;if(typeof e.size=="number")return e.size;if(typeof e.numRows=="function")return e.numRows()}function It(e){const t=new Set;for(const n of e)for(const i in n)t.add(i);return Array.from(t)}function Kt({value:e="",label:t,placeholder:n,spellcheck:i,autocomplete:r,autocapitalize:u,rows:o=3,minlength:f,maxlength:d,required:l=f>0,readonly:h,disabled:p,monospace:g=!1,resize:v=o<12,width:b,...O}={}){const N=m`<textarea
    name=text
    readonly=${h}
    disabled=${p}
    required=${l}
    rows=${o}
    minlength=${f}
    maxlength=${d}
    spellcheck=${de(i)}
    autocomplete=${B(r)}
    autocapitalize=${B(u)}
    placeholder=${n}
    onkeydown=${$}
    style=${{width:b,fontFamily:g?"var(--monospace, monospace)":null,resize:v?null:"none"}}
  >`,w=m`<form class="inputs-3a86ea inputs-3a86ea-textarea" style=${F(b)}>
    ${j(t,N)}<div>
      ${N}
    </div>
  </form>`;function $(S){if(O.submit&&S.key==="Enter"&&(S.metaKey||S.ctrlKey))return w.dispatchEvent(new Event("submit",oe))}return J(w,N,e,O)}function Ht(e){const t=new EventTarget;return t.value=e,t}function Pe(e){return new Promise(t=>{requestAnimationFrame(()=>{const n=e.closest(".observablehq");if(!n)return t();const i=new MutationObserver(()=>{n.contains(e)||(i.disconnect(),t())});i.observe(n,{childList:!0})})})}function Rt(e,t,n=Pe(e)){const i=_e(t),r=()=>Fe(e,t),u=()=>(Fe(t,e),t.dispatchEvent(new Event(i,oe)));return r(),e.addEventListener(_e(e),u),t.addEventListener(i,r),n.then(()=>t.removeEventListener(i,r)),e}function Bt(e){switch(e.type){case"range":case"number":return e.valueAsNumber;case"date":return e.valueAsDate;case"checkbox":return e.checked;case"file":return e.multiple?e.files:e.files[0];default:return e.value}}function Fe(e,t){const n=Bt(t);switch(e.type){case"range":case"number":e.valueAsNumber=n;break;case"date":e.valueAsDate=n;break;case"checkbox":e.checked=n;break;case"file":e.multiple?e.files=n:e.files=[n];break;default:e.value=n;break}}function _e(e){switch(e.type){case"button":case"submit":return"click";case"file":return"change";default:return"input"}}export{Rt as bind,Ve as button,nt as checkbox,dt as color,ht as date,vt as datetime,Pe as disposal,ot as email,kt as file,$t as form,We as formatAuto,se as formatDate,ie as formatLocaleAuto,W as formatLocaleNumber,Ge as formatNumber,ke as formatTrim,Ht as input,xt as number,ft as password,tt as radio,Nt as range,Ot as search,je as searchFilter,qt as select,Mt as table,st as tel,Q as text,Kt as textarea,rt as toggle,ct as url};
